<h1><%= @session.class_type.name %></h1>

<p><strong>Wanneer:</strong>
  <% sd = session_datetime(@session) %>
  <% ed = (@session.respond_to?(:ends_at) && @session.ends_at.present?) ? @session.ends_at : nil %>
  <%= sd ? (l(sd, format: :long) rescue sd) : "-" %>
  <% if ed %> - <%= (l(ed, format: :long) rescue ed) %><% end %>
</p>
<p><strong>Locatie:</strong> <%= @session.gym %></p>
<% if @session.trainer_name.present? %>
  <p><strong>Trainer:</strong> <%= @session.trainer_name %></p>
<% end %>
<p><strong>Capaciteit:</strong> <%= @session.capacity %></p>
<p><strong>Ingeschreven:</strong> <%= @occupancy %> / <%= @session.capacity %></p>
<p><strong>Vrije plekken:</strong> <%= @spots_left %></p>

<% if @booking.present? %>
  <p>Je bent ingeschreven voor deze sessie.</p>
  <%= button_to 'Annuleer', storefront_booking_path(@booking, gym_slug: current_gym.slug), method: :delete, data: { confirm: 'Weet je het zeker?' } %>
<% elsif @session.full? %>
  <p>Deze sessie is vol.</p>
<% elsif @active_membership&.unlimited? && @daily_cap_reached %>
  <p>Je hebt je dagelijkse limiet bereikt voor onbeperkte boekingen.</p>
<% else %>
  <%= button_to 'Boek', storefront_bookings_path(session_id: @session.id, gym_slug: current_gym.slug), method: :post %>
<% end %>

<p><%= link_to 'Terug naar lessen', storefront_classes_path(gym_slug: current_gym.slug) %></p>
